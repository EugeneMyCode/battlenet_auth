# battlenet_auth
Тесты для страницы авторизации battle.net

# Установка и Запуск
Система Windows 10 с последней версией python
  В корневой директории вводить следующие команды:
1. Создаем виртуальное окружение
   python -m venv env
2. Запуск виртуальной среды
   env\Scripts\activate
3. Установка зависимостей
   python -r requirements.txt
4. Запуск тестов
   pytest --html=report.html

# Где лежат результаты тестов
В корневой директории. Файл report.html

# Где лежат скрины
В папке screenshots. Название каждого скрина состоит из названия тестовой функции + браузера + порядковой цифры скрина в тесте. Для параметризованных тестов добавляется описание параметра перед порядковой цифрой.

# Где лежат логи к тестам?
В отчёте report.html
Нужно кликнуть на конкретный тест и будет показан лог об успешном прохождении, либо трассировка по ошибке.
![Screenshot_1](https://github.com/EugeneMyCode/battlenet_auth/assets/98652070/3124e8d1-5871-4902-8376-3516bdaf55b2)
![Screenshot_2](https://github.com/EugeneMyCode/battlenet_auth/assets/98652070/56b7fa3d-d999-42b5-b0f7-9e52b1edd74b)

# Почему для Chrome драйвер подтягивается с сервера, а для Firefox лежит в каталоге?
Причина в лимите на серверах Mozilla. Они не позволяют слишком часто обращаться к ним с одного ip. Поэтому драйвер (geckodriver.exe) скачан и лежит в каталоге.

# Почему в тесте кнопки Google подтягивается из разметки слово Facebook?
Это баг на самом сайте - у в разметке кнопки гугла размещена фраза "Авторизоваться с помощью Facebook".

# Почему может упасть тест для Facebook?
Этот ресурс забанен в РФ. Тест пройдет с VPN.

# Почему может упасть тест для входа в аккаунт?
Система сайта может испугаться чужого ip и провести доп. проверку через отправку электронного письма. Поэтому не факт, что тест пройдёт.

# Почему могут упасть параметризованные негативные тесты?
Причина в частом обращении к сайту с одного ip. Система на третий-четвертый раз требует проходить капчу, которую скриптом не обойти.
